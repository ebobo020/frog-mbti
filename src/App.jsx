// src/App.jsx
import React, { useState, useMemo, useRef } from "react";
import { motion, AnimatePresence } from "framer-motion";
import { toPng } from "html-to-image";

/* ===================== ì§ˆë¬¸ ===================== */
const QUESTIONS = [
  { id: 1, text: "ì²˜ìŒ ê°„ ì—°ëª»ì—ì„œ ë‚¯ì„  ê°œêµ¬ë¦¬ë“¤ì´ ê°œêµ´ê°œêµ´ ì›ƒê³  ìˆë‹¤. ë‹¹ì‹ ì€?", a: "â€œì•ˆë…•! ë‚˜ë„ ê°œêµ´ì´ì•¼!â€ ë°”ë¡œ í•©ë¥˜í•œë‹¤", b: "ì¡°ìš©íˆ ìˆ˜ì´ˆ ë’¤ì— ìˆ¨ì–´ ë¶„ìœ„ê¸°ë¥¼ ì‚´í•€ë‹¤", map: { A: "E", B: "I" } },
  { id: 2, text: "ì¹œêµ¬ ê°œêµ¬ë¦¬ê°€ ë²Œë ˆ ì‚¬ëƒ¥ì„ ì œì•ˆí–ˆë‹¤. ë‹¹ì‹ ì€?", a: "ë§ì„¤ì„ ì—†ì´ ë›°ì³ë‚˜ê°„ë‹¤", b: "í•˜ëŠ˜ í•œë²ˆ ë³´ê³ , ë¹„ ì˜¤ë©´ ë‚˜ê°€ìê³  í•œë‹¤", map: { A: "P", B: "J" } },
  { id: 3, text: "ì—°ëª» íšŒì˜ ì¤‘ í•œ ê°œêµ¬ë¦¬ê°€ ì—°ì ë³´ê³ ì„œë¥¼ ì—ì§ˆë €ë‹¤!", a: "ì›ì¸ì„ ë¶„ì„í•˜ë©° í•´ê²°ì±…ë¶€í„° ì°¾ëŠ”ë‹¤", b: "â€œê´œì°®ì•„~â€ í•˜ë©° ë¬¼ë°©ìš¸ ë‹¦ì•„ì¤€ë‹¤", map: { A: "T", B: "F" } },
  { id: 4, text: "ë¹„ ì˜¤ëŠ” ë‚ , ì—°ëª»ê°€ì— ì•‰ì•„ ìˆë‹¤. ë„Œ ì–´ë–¤ ê°œêµ¬ë¦¬?", a: "ë¬¼ê²°ì— ë‚´ ë§ˆìŒì„ ë„ì›Œë³´ë‚´ëŠ” ê°ì„± ê°œêµ´", b: "ë¹—ì†Œë¦¬ì—ì„œ ë¦¬ë“¬ íŒ¨í„´ì„ ì°¾ëŠ” ë¶„ì„ ê°œêµ´", map: { A: "F", B: "T" } },
  { id: 5, text: "ìƒˆë¡œìš´ ì—°ì ìœ„ë¡œ ê±´ë„ˆì•¼ í•œë‹¤!", a: "ì¼ë‹¨ ë›°ì–´ë³¸ë‹¤. ì‹¤íŒ¨ë„ ê²½í—˜ì´ì§€!", b: "ë¨¼ì € ë°Ÿì•„ë³¸ ê°œêµ¬ë¦¬ì˜ ë°œìêµ­ì„ ì‚´í•€ë‹¤", map: { A: "N", B: "S" } },
  { id: 6, text: "í•œ ê°œêµ¬ë¦¬ê°€ íšŒì˜ ì‹œê°„ì— ê°‘ìê¸° ì—°ëª»ì— í’ë© ë›°ì–´ë“¤ì—ˆë‹¤!", a: "ê·œì¹™ì´ ì¤‘ìš”í•˜ë‹¤ê³  ë§í•œë‹¤", b: "â€˜ê·¸ë˜, ì‚´ë‹¤ ë³´ë©´ ê·¸ëŸ´ ìˆ˜ë„ ìˆì§€...â€™", map: { A: "J", B: "P" } },
  { id: 7, text: "ì¹œêµ¬ ê°œêµ¬ë¦¬ê°€ ìš¸ì í•´í•œë‹¤.", a: "â€œë¬´ìŠ¨ ì¼ ìˆì–´?â€ ì´ìœ ë¥¼ ë¬¼ì–´ë³¸ë‹¤", b: "ê°™ì´ ì—°ëª»ì— ê°€ì„œ ìš¸ì ì†¡ì„ ë¶€ë¥¸ë‹¤", map: { A: "T", B: "F" } },
  { id: 8, text: "ë‹¤ìŒ ì í”„ ëª©í‘œë¥¼ ì •í•  ë•Œ, ë„Œ ì–´ë–¤ íƒ€ì…?", a: "ê·¸ë‚  ê¸°ë¶„ì— ë”°ë¼ ë›´ë‹¤", b: "ì í”„ ê±°ë¦¬ë¶€í„° ì¬ë³¸ë‹¤", map: { A: "P", B: "J" } },
  { id: 9, text: "ì—°ëª» íŒŒí‹°ì—ì„œ ì²˜ìŒ ë³´ëŠ” ê°œêµ¬ë¦¬ë¥¼ ë§Œë‚¬ë‹¤!", a: "â€œë„Œ ì–´ë””ì„œ ê°œêµ´í•´?â€ ë¨¼ì € ë§ì„ ê±´ë‹¤", b: "ìƒëŒ€ê°€ ë‹¤ê°€ì˜¤ê¸¸ ê¸°ë‹¤ë¦°ë‹¤", map: { A: "E", B: "I" } },
  { id: 10, text: "ì í”„ ì—°ìŠµ ì¤‘ ë¬¼ì— ë¹ ì¡Œë‹¤!", a: "ì´ìœ ë¥¼ ê¸°ë¡í•˜ê³  ì í”„ ê°ë„ë¥¼ ìˆ˜ì •í•œë‹¤", b: "â€˜ë­ ì–´ë•Œ~ ì›ë˜ ê°œêµ¬ë¦¬ëŠ” ë¬¼ì— ì‚´ì•„ã…‹â€™ í•˜ê³  ì›ƒëŠ”ë‹¤", map: { A: "J", B: "P" } },
  { id: 11, text: "ë‹¤ë¥¸ ê°œêµ¬ë¦¬ê°€ ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ëƒˆë‹¤!", a: "â€œì´ê±¸ ë” ê°œêµ´ìŠ¤ëŸ½ê²Œ í•´ë³´ë©´ ì–´ë•Œ?â€ í•˜ê³  ë°œì „ì‹œí‚¨ë‹¤", b: "â€œì™€ ê°œêµ´~ ì²œì¬ ê°œêµ¬ë¦¬ì–ì•„?â€ ë°•ìˆ˜ì¹œë‹¤", map: { A: "N", B: "F" } },
  { id: 12, text: "ì˜¤ëŠ˜ì˜ ì—°ëª» ìƒí™œì´ ëë‚¬ë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ ë„Œ?", a: "ë‚´ì¼ì˜ ì í”„ ê³„íšì„ ì„¸ìš´ë‹¤", b: "ë‹¬ë¹› ì•„ë˜ì„œ í•˜í’ˆí•˜ë©° ì ë“ ë‹¤", map: { A: "J", B: "P" } },
];

/* ===================== ê²°ê³¼(16í˜•) ===================== */
const RESULTS = {
  ENTJ: { name: "ğŸ”¥ë¦¬ë” ê°œêµ¬ë¦¬", desc: "ì—°ëª»ê°œë°œì²­ ì²­ì¥ë‹˜. íšŒì˜ ì¤‘ë…ì", image: "/frogs/ENTJ.png", traits: ["ì•„ì¹¨ 6ì‹œ íšŒì˜ ì†Œì§‘, ì•ˆ ì˜¤ë©´ â€˜ì˜ì§€ ë¶€ì¡±â€™ì´ë¼ íŒë‹¨","ì í”„í•˜ê¸° ì „ì— ë¦¬í—ˆì„¤ ì„¸ ë²ˆ í•¨","ë‹¤ë¥¸ ê°œêµ¬ë¦¬ ì—­í• í‘œ ë§Œë“¤ë‹¤ê°€ ì¢…ì¢… ìê¸° ì´ë¦„ ê¹œë¹¡í•¨","ë¬¼ê¸¸ ë°©í–¥ê¹Œì§€ ì •ë¹„í•˜ë ¤ í•¨ (ìì—°ì„ í†µì œí•˜ë ¤ëŠ” ê°œêµ¬ë¦¬)","ê°€ë” ë°¤ì— ìê¸° ê³„íšì„œ ë³´ë©° ê°ë™í•¨","ê°€ë” ìê¸° ì´ë¦„ ê²€ìƒ‰í•´ì„œ í‰íŒ í™•ì¸í•¨","ëª©í‘œ ì—†ëŠ” ë‚ ì—” ë¶ˆì•ˆí•´ì„œ ì—°ëª»ì„ í•œ ë°”í€´ ë›´ë‹¤","ë¹„ ì˜¬ ì¡°ì§ë§Œ ë³´ì—¬ë„ ëŒ€ì±… íšŒì˜ ì†Œì§‘í•¨"] },
  ENTP: { name: "ğŸ’¡ë°œëª… ê°œêµ¬ë¦¬", desc: "ì—°ëª»ì˜ í˜¼ëˆ ì œì¡°ê¸°", image: "/frogs/ENTP.png", traits: ["â€œì´ê±´ ì‹¤íŒ¨ê°€ ì•„ë‹ˆì•¼, ì˜ˆìƒì¹˜ ëª»í•œ ë°œê²¬ì´ì§€.â€","ì•„ì´ë””ì–´ ë…¸íŠ¸ 100ê¶Œ, ì™„ì„±ëœ ê±´ 0ê°œ","í•˜ë£¨ ì„¸ ë²ˆ â€˜ì²œì¬â€™ë¼ëŠ” ë‹¨ì–´ë¥¼ ì‚¬ìš©í•¨ (ëŒ€ë¶€ë¶„ ìì¹­)","ê°œêµ¬ë¦¬ ì„¸ê³„ ìµœì´ˆì˜ â€˜ë¬¼ì´ ë°œì‚¬ê¸°â€™ë¥¼ ë§Œë“¤ì—ˆì§€ë§Œ í­ë°œí•¨","í•œ ë¬¸ì¥ì— â€œê·¼ë°â€ ì„¸ ë²ˆ ë„£ìŒ","ëª¨ë“  ëŒ€í™”ê°€ í† ë¡ ìœ¼ë¡œ ëë‚¨","ê°€ë” ìê¸° ë†ë‹´ì— ê°œêµ´ê°œêµ´ ì›ƒë‹¤ê°€ ë¯¸ë„ëŸ¬ì§"] },
  ENFJ: { name: "ğŸŒ¹ì½”ë”” ê°œêµ¬ë¦¬", desc: "ëª¨ë“  ê°œêµ¬ë¦¬ë¥¼ í–‰ë³µí•˜ê²Œ ë§Œë“œëŠ” ê²Œ ì‚¬ëª…", image: "/frogs/ENFJ.png", traits: ["â€œë„ˆ ìŠ¬í¼ ë³´ì´ë„¤, í˜¹ì‹œ ì–´ì œ ê¿ˆì— ë¹„ ì™”ì–´?â€","ì—°ëª» íŒŒí‹° ì´ë¬´ ë§¡ìŒ","ê°ì • ìŠ¤ì¼€ì¤„ëŸ¬ ì•± ë§Œë“œëŠ” ì¤‘","ë§ ëì— ëŠë‚Œí‘œ ì„¸ ê°œì”© ì•ˆë¶™ì´ë©´ ë§ ëª»í•¨","í•˜ë£¨ì— ì„¸ ë²ˆ ì´ìƒ ê°ë™í•¨","ëª¨ë“  ì‹¸ì›€ì„ ì¤‘ì¬í•˜ë ¤ë‹¤ ìê¸°ê°€ í”¼ë¡œ ëˆ„ì ","ê·¼ë° ë˜ ë‹¤ìŒ ë‚  ë˜‘ê°™ì´ ì¤‘ì¬í•¨","ì—°ëª» ë‹¨í†¡ë°© ë¶„ìœ„ê¸° ë©”ì´ì»¤","ëˆ„ê°€ ë‹¨í†¡ë°© ë‚˜ê°€ë©´ ìƒˆ í†¡ë°© ë§Œë“¦"] },
  ENFP: { name: "ğŸŒˆíŒŒí‹° ê°œêµ¬ë¦¬", desc: "ë¹„ ì˜¤ëŠ” ë‚ ì— ì¶•ì œ ì—¬ëŠ” ìœ ì¼í•œ ì¡´ì¬", image: "/frogs/ENFP.png", traits: ["ë²Œë ˆë³´ë‹¤ ë¹„íŠ¸ì— ë°˜ì‘","ì—°ì ìœ„ DJ","ëª¨ë“  ê²Œ ìš´ëª…ì´ë¼ ë¯¿ìŒ","ê³„íšì€ 3ë¶„, ì‹¤í–‰ì€ ì¦‰ì‹œ, í›„íšŒëŠ” 10ì´ˆ","10ê°œ í”„ë¡œì íŠ¸ ë™ì‹œì— ì‹œì‘í•¨","ëŒ„ìŠ¤ ì›ì •ê°","ìƒˆ ì¹œêµ¬ì—ê²Œ ì´ë¦„ ë¬»ê¸°ë„ ì „ì— ë³„ëª… ë¶™ì„","ì „êµ­ ì—°ëª» íˆ¬ì–´ ê³„íš ì¤‘","ê°ì •ë³€í™” ê·¸ë˜í”„ T-express","ê°ì • ê¸°ë³µì´ 1í˜¸ì„  ì§€ì—°ë§Œí¼ ì¦ìŒ","SNSì— ìê¸° ì—°ëª» ì…€ì¹´ 159ì¥ ìˆìŒ","â€˜ì´ê±´ ìš´ëª…ì´ì•¼â€™ë¼ê³  í•˜ë£¨ 3íšŒ ì´ìƒ ë§í•¨"] },
  ESTJ: { name: "ğŸª–ê°ë… ê°œêµ¬ë¦¬", desc: "ëŒ€í•œê°œêµ¬ë¦¬ì—°ëª»íšŒ íšŒì¥ ì—°ì„ ì¤‘. ì—°ëª» ì¹˜ì•ˆÂ·ì§ˆì„œ ë‹´ë‹¹", image: "/frogs/ESTJ.png", traits: ["â€˜ê°œêµ¬ë¦¬ëŠ” ê·œì¹™ì´ ìƒëª…ì´ë‹¤â€™ ì‹ ì¡° ë³µì°½í•˜ë¼ê³  í•¨","â€œì§ˆì„œ ì—†ëŠ” ì—°ëª»ì€ ëŠªì´ë‹¤.â€ ì™¸ì¹˜ê³  ë‹¤ë‹˜","í•˜ë£¨ ì¼ê³¼ë¥¼ ë¶„ ë‹¨ìœ„ë¡œ ë‚˜ëˆ”","ì¼ì •ì´ ë°€ë¦¬ë©´ â€˜ì—°ëª» ë¹„ìƒì‚¬íƒœâ€™ ì„ ì–¸","ë¬¼ê¸¸ë„ ì§ì„ ìœ¼ë¡œ ì •ë¦¬í•¨","ê·œì¹™í‘œë¥¼ ì—°ìì— ìƒˆê²¨ë‘ê³  ì•„ì¹¨ë§ˆë‹¤ ì ê²€ (ë°±ì—… ì—°ì 3ì¥ ë³´ìœ  ì¤‘)","íŒŒí‹° ê°œêµ¬ë¦¬ë¥¼ â€˜ì¬ì•™ì˜ ì”¨ì•—â€™ì´ë¼ ë¶€ë¦„","ê³ ì•½í•œ ê°œêµ¬ë¦¬ë¥¼ ë³´ë©´ ì‹¬ì¥ì´ ì¿µì¾…ê±°ë¦¼ (negative)"] },
  ESTP: { name: "âš¡ëª¨í—˜ ê°œêµ¬ë¦¬", desc: "ì—°ëª» ë°– íƒí—˜ ì¤‘. ìƒì¡´ í™•ë¥  63%", image: "/frogs/ESTP.png", traits: ["â€œë‚´ ì¸ìƒì— ì•ˆì „ë²¨íŠ¸ëŠ” ì—†ì–´.â€","ì²«ì¸ì‚¬ëŠ” ëŠ˜ â€œì´ê±° í•´ë³¼ë˜?â€","ë¬¼ê¸¸ ë”°ë¼ í˜ëŸ¬ê°”ë‹¤ê°€ ëŒì•„ì˜¤ì§€ ì•ŠëŠ” ë‚ ë„ ìˆìŒ","ëª¨ë“  ê²½ê³ ë¬¸ì„ â€˜ë„ì „ì¥â€™ìœ¼ë¡œ ì½ìŒ","ì—°ìì—ì„œ ë¯¸ë„ëŸ¬ì ¸ë„ ì›ƒê³  ê¹Œë¨¹ìŒ","ë‹¤ë¥¸ ê°œêµ¬ë¦¬ì—ê²Œ â€œë„ˆë¬´ ì¬ë°ŒëŠ” ì‹¤ìˆ˜ì˜€ë‹¤â€ë¼ í•¨","ê°œêµ¬ë¦¬ ì¤‘ ìœ ì¼í•˜ê²Œ í‰í„° ìë‘í•¨","ë‹¤ë¥¸ ê°œêµ¬ë¦¬ ë†€ë˜í‚¤ëŠ”ê²Œ ì‚¶ì˜ ë‚™"] },
  ESFJ: { name: "â˜€ï¸ë„í† ë¦¬ë¹µì§‘ ê°œêµ¬ë¦¬", desc: "ì—°ëª» ì œì¼ì˜ ë¹µ êµ½ëŠ” ê°œêµ¬ë¦¬", image: "/frogs/ESFJ.png", traits: ["ëª¨ë“  ê°œêµ¬ë¦¬ ìƒì¼ ì™¸ì›€","ëª¨ë“  ê°œêµ¬ë¦¬ ì•Œë ˆë¥´ê¸° ì •ë³´ ìˆ™ì§€","â€˜ë„í† ë¦¬ë¹µ 1+1 ì´ë²¤íŠ¸â€™ë¡œ ì—°ëª» í‰í™” ìœ ì§€","ë¹µ ë°˜ì£½ì— ë‹¤ë¥¸ ê°œêµ¬ë¦¬ ì´ë¦„ ìƒˆê¹€ (ê¹œì§ ì´ë²¤íŠ¸)","ê³ ë¯¼ìƒë‹´ í•˜ë‹¤ ë°˜ì£½ íƒœì›€","ì…ë²„ë¦‡ = â€œê·¸ê±´ ë„¤ ì˜ëª»ì´ ì•„ë‹ˆì•¼â€","ë²Œë ˆ ë°˜ ê°ˆë¼ì„œ ë‚˜ëˆ ì¤Œ","ì—°ëª» ì „ì—­ì— ì¿ í‚¤ ëƒ„ìƒˆ í¼ëœ¨ë ¤ ì£¼ë¯¼ í–‰ë³µìˆ˜ì¹˜ ìƒìŠ¹","ìê¸°ë¹µ ë¨¹ì„ ì‹œê°„ì€ ì—†ìŒ (í•­ìƒ ë°”ì¨)","ì—°ëª» ì›”ë“œ ë¶„ìœ„ê¸° ë©”ì´ì»¤ 2ìœ„"] },
  ESFP: { name: "ğŸ‰ì•„ì´ëŒ ê°œêµ¬ë¦¬", desc: "íŒ¬í´ëŸ½ 5ê°œ. â€œê°œêµ¬ë¦¬ë„ ë¹›ë‚  ìˆ˜ ìˆì–´!â€", image: "/frogs/ESFP.png", traits: ["ì—°ëª»ì´ ë¬´ëŒ€ê³  ê°œêµ¬ë¦¬ëŠ” ì£¼ì¸ê³µ","íŒ¬í´ëŸ½ ë‹¤ì„¯ ê°œ ìš´ì˜ ì¤‘ (ë³¸ì¸ íŒ¬í´ëŸ½)","ì…€ì¹´ 100ì¥ ì°ëŠ”ë° ë§˜ì— ë“œëŠ”ê±° ì—†ìŒ","ì—°ëª» ê°€ì¥ìë¦¬ì—ì„œ ì¦‰í¥ ê³µì—°í•¨","ê³µì—° ì¤‘ ì•µì½œ ë¶€ë¥´ë‹¤ ìš¸ìŒ","ì¢Œìš°ëª… ë¬´ì¡°ê±´ ì¹´ë¥´í˜ë””ì— ","ë‚˜ì¤‘ì— ë³¸ì¸ ì´ë¦„ìœ¼ë¡œ í–¥ìˆ˜ ë§Œë“¤ ì˜ˆì •","ë¬´ëŒ€ ì•„ë˜ì—ì„œëŠ” ì˜ì™¸ë¡œ ìˆ˜ì¤ìŒ ë§ìŒ"] },
  INTJ: { name: "ğŸ§©ì „ëµ ê°œêµ¬ë¦¬", desc: "ì—°ëª» ë„ì‹œê³„íš ì„¤ê³„ì", image: "/frogs/INTJ.png", traits: ["â€œëª¨ë“  ë¬¼ê¸¸ì—” íŒ¨í„´ì´ ìˆë‹¤. ê°œêµ¬ë¦¬ë“¤ì´ ë¬´ì‹œí•  ë¿.â€","ì—°ëª» ë„ì‹œê³„íš ì‹œë®¬ë ˆì´ì…˜ ëŒë¦¬ë©° í–‰ë³µ ëŠë‚Œ","ì—°ëª» êµ¬ì¡°ì™€ í‘œë©´ì¥ë ¥ì„ ì—°êµ¬í•¨","ëŒ€í™” ì¤‘ ë…¼ë¦¬ ì•ˆ ë§ìœ¼ë©´ ìë™ìœ¼ë¡œ ëˆˆ ê°ìŒ","â€œê°ì •ì´ë€ ë³€ìˆ˜ëŠ” í†µì œ ë¶ˆê°€â€ë¼ê³  ì§„ì‹¬ìœ¼ë¡œ ìƒê°í•¨","ì…ë²„ë¦‡ = â€œë…¼ë¦¬ì ìœ¼ë¡œ~â€","ì‹¤ìˆ˜í•˜ë©´ í˜¼ì SWOT ë¶„ì„í•¨","í•˜ë£¨ ëª©í‘œëŸ‰ ë‹¬ì„± ëª» í•˜ë©´ ìì±…ì¼ê¸° ì”€","ë¹„íš¨ìœ¨ í˜ì˜¤í•¨","ëˆ„ê°€ ì¹­ì°¬í•˜ë©´ ì€ê·¼íˆ í–‰ë³µí•´í•¨"] },
  INTP: { name: "ğŸ”ì—°êµ¬ ê°œêµ¬ë¦¬", desc: "ë…¼ë¦¬ì™€ ì´ë¡ ìœ¼ë¡œ ì„¸ìƒì„ ë³´ëŠ” ì² ë‘ì² ë¯¸ ê°œêµ´", image: "/frogs/INTP.png", traits: ["â€œì´ë¡ ìƒ ë¶ˆê°€ëŠ¥í•œ ê±´ ì—†ì§€, ë‹¤ë§Œ ê·€ì°®ì„ ë¿.â€","ì‹¤í—˜ ì‹œì‘ë³´ë‹¤ ì œëª© ì •í•˜ëŠ” ë° 1ì‹œê°„","ê²°ë¡  ë‚´ë¦¬ë©´ ë˜ ì˜ì‹¬í•¨","â€˜ì™œ?â€™ë¥¼ ì„¸ ë²ˆ ì´ìƒ ë°˜ë³µí•´ì•¼ ëŒ€í™” ì¢…ë£Œ","â€˜ë…¼ë¦¬ì ìœ¼ë¡œ~â€™ ë§í•˜ê³  ë‚˜ì„œ ìê¸° ë…¼ë¦¬ í—·ê°ˆë¦¼","í˜„ì‹¤ ê°ê° ì‹¤ì¢…"] },
  INFJ: { name: "ğŸŒ™ì² í•™ ê°œêµ¬ë¦¬", desc: "ì—°ëª» ì¡´ì¬ì˜ ì´ìœ ë¥¼ íƒêµ¬í•˜ëŠ” ì‚¬ìƒ‰ê°€", image: "/frogs/INFJ.png", traits: ["ì—°ëª» ì›”ë“œì˜ ì†Œí¬ë¼í…ŒìŠ¤","ê°œêµ¬ë¦¬ ì„¸ê³„ì˜ â€˜ë©”ë¥´ì‹œâ€™","â€œì´ ë¬¼ê²°ì´ ìŠ¤ìŠ¤ë¡œ íë¥´ëŠ” ê±¸ê¹Œ, ì•„ë‹ˆë©´ ìš°ë¦¬ê°€ ì›€ì§ì´ëŠ” ê±¸ê¹Œ.â€","ì‹œì¸ ê°œêµ¬ë¦¬ì™€ ìì£¼ ì‹¬ë¦¬ í† í¬í•¨","ìƒˆë²½ë§ˆë‹¤ ì¡°ìš©íˆ ì—°ëª» ê±°ë‹ë©° ì‚¬ìƒ‰","ë‹¤ë¥¸ ê°œêµ¬ë¦¬ ê³ ë¯¼ ë“£ê³  ìê¸°ê°€ ì•“ì•„ëˆ„ì›€","í˜¼ì ìˆëŠ” ê±¸ ì¢‹ì•„í•˜ì§€ë§Œ í˜¼ìê°€ ì•„ë‹ˆê¸¸ ë°”ëŒ","ë¹„ ì˜¤ëŠ” ë‚ ì—” ì¡°ìš©íˆ ê¸°ë„í•˜ë“¯ ê°œêµ´í•¨"] },
  INFP: { name: "ğŸƒì‹œì¸ ê°œêµ¬ë¦¬", desc: "ê°ì •ìœ¼ë¡œ ì‚¬ëŠ” ì—°ëª»ì˜ ë‚­ë§Œê°€", image: "/frogs/INFP.png", traits: ["â€œì˜¤ëŠ˜ì˜ ë¬¼ê²°ì€ ìŠ¬í¼ì„œ ì˜ˆë»â€, ê°ì •ì´ ë¶ë°›ì¹¨","ë‹¬ ë³´ë©´ ê´œíˆ ìŠ¬í””","ë³¸ì¸ ì‹œì— ìŠ¤ìŠ¤ë¡œ ê°ë™ë°›ìŒ","í˜„ì‹¤ ë¬¸ì œë³´ë‹¤ ìƒìƒ ì† ì´ì•¼ê¸° ê±±ì •í•¨","ë…¸ë˜Â·ê·¸ë¦¼Â·ì‹œ ë‹¤ ì˜í•˜ì§€ë§Œ ê¾¸ì¤€í•¨ì€ ë–¨ì–´ì§€ëŠ” í¸","ê°ì •ì„  í­ì£¼í•˜ë©´ ê¸€ì”¨ì²´ë„ ë‹¬ë¼ì§","í•œê¸€ê³¼ ì»´í“¨í„° ê¸€ì”¨ì²´ë¡œ â€˜ì‹œì¸ ê°œêµ¬ë¦¬ì²´â€™ 36ê°œ ë³´ìœ  ì¤‘","ë¹„ ì˜¤ëŠ” ë‚ ì—” ì‹œì§‘ ë“¤ê³  ì‚°ì±…í•¨"] },
  ISTJ: { name: "ğŸ“˜íšŒê³„ ê°œêµ¬ë¦¬", desc: "ì—°ëª» ì˜ˆì‚° ë‹´ë‹¹, ê·œì¹™ê³¼ ì„œë¥˜ì˜ ì •ë ¹", image: "/frogs/ISTJ.png", traits: ["â€œì‚ë¹…. ê·œì¹™ ìœ„ë°˜. ê·œì¹™ì€ ê°œêµ´ì˜ ë“±ë¼ˆë‹¤.â€","ì—°ëª» í†µê³„ ë…¸íŠ¸ ìˆìŒ (â€œì•„ì´ëŒ ê°œêµ¬ë¦¬ ê¸ˆì¼ ì í”„ 7322íšŒâ€)","ë¹„ ì™€ë„ ì •í•´ì§„ ë£¨í‹´ ì§€ì¼œì•¼ë¼ì„œ ìš¸ë©´ì„œ ì„¸ì°¨í•¨","ë‚¯ì„  ê°œêµ¬ë¦¬ê°€ ì¸ì‚¬ ì•ˆ í•˜ë©´ 3ì¼ ë‚´ë‚´ ì‹ ê²½ì”€","ì—°ì ì°¨ê³¡ì°¨ê³¡ ì •ë¦¬í•˜ë‹¤ í•˜ë£¨ ë‹¤ ê°","í•  ì¼ ë‹¤ í•˜ë©´ ìŠ¤ìŠ¤ë¡œì—ê²Œ ì¹­ì°¬ ìŠ¤íƒ¬í”„ ì°ìŒ","ì—°ëª»ì— â€˜ì˜¬í•´ì˜ ê°œêµ¬ë¦¬ìƒâ€™ í›„ë³´ë¡œ ì„¸ ë²ˆ ì˜¤ë¦„ (ë‹¹ì„ x)"] },
  ISTP: { name: "ğŸ§±ê³µëŒì´ ê°œêµ¬ë¦¬", desc: "ì—°ëª» ê¸°ìˆ ì§ 1í˜¸. ì¡°ìš©í•œ ê´´ì§œ ê°œêµ´", image: "/frogs/ISTP.png", traits: ["â€œì´ê²Œ ì™œ ì•ˆ ë¼? ...ì•„ ëë‹¤ ã… (í‘)â€","ë‚¡ì€ í†µë‚˜ë¬´ ë°‘ ì‹¤í—˜ì‹¤ ê±°ì£¼","ì¹¨ë¬µ 90%, í­ë°œ 10%","ì—°ëª»ì—ì„œ ê°€ì¥ ë§ì´ â€˜ëšë”±â€™ ì†Œë¦¬ ë‚¨","ë¶ˆí¸í•˜ë©´ ì§ì ‘ ê³ ì³ë²„ë¦¼","ì—°ëª» ì „ê¸° ì‹œìŠ¤í…œ ë§Œë“  ì£¼ì¸ê³µ","ëˆ„ê°€ ë¶€ë¥´ë©´ ì§€ê¸ˆ ë°”ì˜ë‹¤ê³  í•¨","ë³¸ì¸ë„ ì™œ ë°”ìœì§€ëŠ” ëª¨ë¦„","ì„±ê³µí•´ë„ í‹° ì•ˆ ëƒ„, ëŒ€ì‹  ì…ê¼¬ë¦¬ ì‚´ì§ ì˜¬ë¼ê°","í¥ë¯¸ê°€ ë¹¨ë¦¬ ì‹ìŒ"] },
  ISFJ: { name: "ğŸŒ¾ê°„í˜¸ ê°œêµ¬ë¦¬", desc: "ì—°ëª» ë³‘ë™ì—ë„ ì•„ì¹¨ì´ ì™€ìš”^^, ì°©í•œ ê°œêµ´ ê·¸ ìì²´", image: "/frogs/ISFJ.png", traits: ["â€œê´œì°®ì•„ìš”, ì¡°ê¸ˆë§Œ ì‰¬ë©´ ë‹¤ì‹œ ê°œêµ´ê°œêµ´ í•  ìˆ˜ ìˆì–´ìš” ã…ã…â€","ëª¨ë“  ê°œêµ¬ë¦¬ì—ê²Œ ì¡´ëŒ“ë§í•¨","ë‹¤ì¹œ ê°œêµ¬ë¦¬ì—ê²Œ ì—°ì ë°´ë“œ ì§ì ‘ ì œì‘","ë¶€íƒ ê±°ì ˆ ëª» í•¨ (ê·¸ë˜ì„œ ëŠ˜ í”¼ê³¤í•¨)","â€˜ê³ ë§™ë‹¤â€™ ì†Œë¦¬ì— ìš¸ì»¥í•¨","ìê¸° ê±±ì •í•˜ë©´ â€œì „ ê´œì°®ì•„ìš”!â€ë¼ê³  ë§í•¨ (ì•ˆê´œì°®ìŒ)","í™”ë‚´ëŠ” ë²• ëª°ë¼ì„œ ê²€ìƒ‰í•¨","ì¡°ìš©í•˜ì§€ë§Œ ì—°ëª»ì´ í˜ë“¤ ë• ë§¨ ë¨¼ì € ì›€ì§ì„","ì‚¬ëŒ ì¢‹ì€ ì›ƒìŒ(ê°œêµ¬ë¦¬ ì¢‹ì€ ì›ƒìŒ)"] },
  ISFP: { name: "ğŸŒ¸ê°ì„± ê°œêµ¬ë¦¬", desc: "ì¡°ì•½ëŒ í™”ê°€, ê°ì •ì„ ì˜ ë¯¸í•™", image: "/frogs/ISFP.png", traits: ["ìƒˆë²½ì— ì¼ì–´ë‚˜ ìƒ‰ê¹” ë§ì¶° ëŒ ì •ë¦¬í•¨","ê°¤ëŸ¬ë¦¬ì— ìœ¤ìŠ¬ ì‚¬ì§„ë§Œ 200ì¥","ì—°ëª»ì—ì„œ ê°€ì¥ ì‚¬ì§„ ì˜ ì°ëŠ” ê°œêµ¬ë¦¬","ì¡°ì•½ëŒ ìœ„ì— í•˜ë£¨ ê°ì • ê¸°ë¡","ì¡°ìš©íˆ ê·¸ë¦¼ ê·¸ë¦¼","ì£¼ë³€ ì†ŒìŒì— ì˜ˆë¯¼í•˜ì§€ë§Œ ì‹«ì§€ëŠ” ì•ŠìŒ","ê¸°ë³µ ìˆì§€ë§Œ í•´ì¹˜ì§€ ì•ŠìŒ","ëˆ„ê°€ ê·¸ë¦¼ ì¹­ì°¬í•˜ë©´ ë¶€ë„ëŸ¬ì›Œì„œ ë¬¼ ì†ìœ¼ë¡œ ì ìˆ˜í•¨","ì˜ˆìˆ  ì„¤ëª… ìš”ì²­ë°›ìœ¼ë©´ 3ì´ˆ ì¹¨ë¬µ í›„ â€œê·¸ëƒ¥ ì¢‹ì•„ì„œìš”.â€","ì¡°ìš©í•˜ì§€ë§Œ ì—°ëª»ì˜ ë¶„ìœ„ê¸°ë¥¼ ê²°ì •í•˜ëŠ” ì¡´ì¬"] },
};

/* ===================== íƒ€ì… ê³„ì‚° ===================== */
function toType(answers) {
  const t = { E: 0, I: 0, N: 0, S: 0, T: 0, F: 0, J: 0, P: 0 };
  QUESTIONS.forEach((q) => {
    const pick = answers[q.id];
    if (pick) t[q.map[pick]]++;
  });
  return (
    (t.E >= t.I ? "E" : "I") +
    (t.N >= t.S ? "N" : "S") +
    (t.T >= t.F ? "T" : "F") +
    (t.J >= t.P ? "J" : "P")
  );
}

/* ===================== ë©”ì¸ ===================== */
export default function App() {
  const [step, setStep] = useState(0);
  const [answers, setAnswers] = useState({});
  const resultType = useMemo(() => toType(answers), [answers]);
  const result = RESULTS[resultType] || RESULTS.ENFP;
  const cardRef = useRef(null);

  const handlePick = (c) => {
    const q = QUESTIONS[step - 1];
    setAnswers((p) => ({ ...p, [q.id]: c }));
    setTimeout(() => setStep(step + 1), 300);
  };

  const handleRestart = () => {
    setStep(0);
    setAnswers({});
  };

  const saveImage = async () => {
    if (!cardRef.current) return;
    const dataUrl = await toPng(cardRef.current, { pixelRatio: 3 });
    const a = document.createElement("a");
    a.href = dataUrl;
    a.download = `${result.name}.png`;
    a.click();
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-b from-mint-100 to-white font-[Pretendard] text-gray-800">
      <AnimatePresence mode="wait">
        {/* ====== Intro ====== */}
        {step === 0 && (
          <motion.div
            key="intro"
            initial={{ opacity: 0, y: 30 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: -30 }}
            transition={{ duration: 0.6 }}
            className="flex flex-col items-center text-center space-y-8"
          >
            <div className="text-8xl">ğŸ¸</div>
            <h1 className="text-5xl font-extrabold text-emerald-800">ë‚˜ëŠ” ì–´ë–¤ ê°œêµ¬ë¦¬ì¼ê¹Œ?</h1>
            <p className="text-xl text-gray-500">ì—°ëª» ì† ë‚˜ì˜ ì„±ê²©ì„ ì•Œì•„ë³´ì</p>
            <motion.button
              whileHover={{ scale: 1.05 }}
              whileTap={{ scale: 0.95 }}
              onClick={() => setStep(1)}
              className="bg-emerald-500 text-white px-10 py-5 rounded-2xl shadow-md hover:bg-emerald-600 text-2xl"
            >
              í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°
            </motion.button>
          </motion.div>
        )}

        {/* ====== Quiz ====== */}
        {step > 0 && step <= QUESTIONS.length && (
          <motion.div
            key="quiz"
            initial={{ opacity: 0, y: 50 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: -50 }}
            transition={{ duration: 0.5 }}
            className="w-full max-w-2xl bg-white/80 p-10 rounded-3xl shadow-xl text-center"
          >
            <h2 className="text-3xl font-bold mb-10 text-emerald-800">{QUESTIONS[step - 1].text}</h2>
            <div className="flex flex-col gap-6">
              <motion.button whileHover={{ scale: 1.03 }} whileTap={{ scale: 0.95 }} onClick={() => handlePick("A")} className="w-full bg-emerald-100 hover:bg-emerald-200 py-6 rounded-2xl text-2xl text-gray-800">
                {QUESTIONS[step - 1].a}
              </motion.button>
              <motion.button whileHover={{ scale: 1.03 }} whileTap={{ scale: 0.95 }} onClick={() => handlePick("B")} className="w-full bg-emerald-100 hover:bg-emerald-200 py-6 rounded-2xl text-2xl text-gray-800">
                {QUESTIONS[step - 1].b}
              </motion.button>
            </div>
            <p className="text-gray-500 mt-10 text-lg">{step}/{QUESTIONS.length}</p>
          </motion.div>
        )}

        {/* ====== Result ====== */}
        {step > QUESTIONS.length && (
          <motion.div
            key="result"
            initial={{ opacity: 0, y: 50 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.6 }}
            className="min-h-screen flex flex-col items-center justify-center px-6 py-10 text-center"
          >
            <div ref={cardRef} className="flex flex-col items-center justify-center text-center w-full max-w-lg mx-auto">
              <img
                src={result.image}
                alt={result.name}
                className="rounded-2xl shadow-md object-contain mb-8 mx-auto"
                style={{
                  width: "75%",
                  maxWidth: "500px",
                  height: "auto",
                  marginBottom: "1rem",
                }}
              />
              {/* íƒ€ì´í‹€ */}
              <h2 className="text-2xl font-extrabold text-emerald-800 mb-3">{result.name}</h2>
              {/* í•œ ì¤„ ì„¤ëª… */}
              <p className="text-lg italic text-gray-600 mb-10 leading-relaxed max-w-[90%] mx-auto">"{result.desc}"</p>
              {/* íŠ¹ì§• ë¦¬ìŠ¤íŠ¸ */}
              <ul className="flex flex-col items-center justify-center text-center space-y-5 text-gray-800 leading-relaxed w-full px-2">
                {result.traits.map((t, i) => (
                  <li key={i} className="max-w-[90%] text-base break-keep">
                    <span className="text-emerald-500"></span>
                    <span>{t}</span>
                  </li>
                ))}
              </ul>
              <div className="flex justify-center gap-3 mt-8">
                <button
                  onClick={handleRestart}
                  className="px-5 py-2 rounded-lg border border-gray-400 hover:bg-gray-100 transition"
                >
                  ë‹¤ì‹œ í•˜ê¸°
                </button>
                <button
                  onClick={() => alert('ì¹­ì°¬ì´ ê°œêµ¬ë¦¬ë¥¼ í–‰ë³µí•˜ê²Œ í–ˆì–´ìš” ğŸ’š')}
                  className="px-5 py-2 rounded-lg border border-emerald-300 bg-emerald-100 hover:bg-emerald-200 text-emerald-700 transition text-sm"
                >
                  ì¹­ì°¬í•˜ê¸°
                </button>
              </div>
            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
}
